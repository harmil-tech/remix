import{a as p,c as y,i as g}from"/build/_shared/chunk-4LG77GEN.js";import{a as T,b as h}from"/build/_shared/chunk-4HXKWYDW.js";import{b as D,c as l}from"/build/_shared/chunk-Q3IECNXJ.js";var v=D((z,b)=>{b.exports={}});var r=l(T()),C=l(v()),e=l(h()),W=(0,r.lazy)(()=>import("/build/_shared/WeatherResult-OM5LBCNI.js")),R=(0,r.lazy)(()=>import("/build/_shared/ErrorAlert-GLQF5MXH.js"));function E(){let t=g(),i=p().state==="submitting",m=(0,r.useRef)(null),[n,a]=(0,r.useState)(null),o=t&&"fieldErrors"in t?t.fieldErrors?.city:void 0,u=t&&"error"in t?t.error:void 0,s=t&&"data"in t?t.data:void 0,d=s?.timelines?.hourly?.[0],x=d?.values?.temperature,S=d?.values?.humidity;(0,r.useEffect)(()=>{t&&"data"in t&&(m.current?.reset(),a(null))},[t]);function F(c){let f=c.currentTarget.city.value.trim();f?f.length<3?(c.preventDefault(),a("City name must be at least 3 characters long!")):a(null):(c.preventDefault(),a("City name is required!"))}return(0,e.jsxs)("div",{style:{fontFamily:"system-ui, sans-serif",lineHeight:"1.8"},children:[(0,e.jsx)("h1",{children:"Weather Data"}),(0,e.jsx)("p",{children:"Enter a city name to see the current forecast."}),(0,e.jsxs)(y,{ref:m,method:"post",onSubmit:F,noValidate:!0,style:{marginTop:"1rem",display:"flex",gap:"0.5rem",alignItems:n||o?"center":"flex-end"},children:[(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",maxWidth:480},children:[(0,e.jsx)("label",{htmlFor:"city",style:{marginBottom:4,fontWeight:500},children:"City"}),(0,e.jsx)("input",{id:"city",name:"city",type:"text",placeholder:"e.g. London","aria-invalid":!!(o||n),"aria-describedby":o?"city-error":void 0,disabled:i,style:{padding:"0.6rem 0.8rem",borderRadius:6,border:o||n?"2px solid #dc3545":"1px solid #ccc",fontSize:"1rem",cursor:i?"not-allowed":"pointer"}}),n&&(0,e.jsx)("div",{id:"city-error",role:"alert",style:{color:"#dc3545",marginTop:6,fontSize:14},children:n}),o&&(0,e.jsx)("div",{id:"city-error",role:"alert",style:{color:"#dc3545",marginTop:6,fontSize:14},children:o})]}),(0,e.jsx)("button",{type:"submit",disabled:i,style:{padding:"0.65rem 1rem",backgroundColor:i?"#6c757d":"#007bff",color:"#fff",border:"none",borderRadius:6,cursor:i?"not-allowed":"pointer",fontWeight:600},children:i?"Fetching...":"Get Weather"})]}),u&&(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)("div",{style:{marginTop:"1rem"},children:"Loading error\u2026"}),children:(0,e.jsx)(R,{message:u})}),s&&d&&(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)("div",{style:{marginTop:"1rem"},children:"Loading details\u2026"}),children:(0,e.jsx)(W,{locationName:s.location?.name,temp:x,humidity:S})})]})}export{E as default};
